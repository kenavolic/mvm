# Mvm

Mvm (meta virtual machine) is a POC library to generate simple stack-based virtual machine from static
description. The descriptive model mimics boost msm one.

The project is only a proof of concept as it can only generate interpreter
for minimal instruction sets and does not handle concepts as garbage collection or execution stack. 

Moreover, the only available backend is a poor performance implementation for educational purpose.
Note that high-performance could not be reached with this kind of automated generation as there is
too many call indirections.

# Current State

Unstable, work in progress

# Features

  * Assembler generation
  * Intepreter generation
  * Generated bytecode handled types: signed integer (2'complement), unsigned integer, floating point number (IEEE754)

# Limitations

 * Instruction set of 256 instructions max
 * No advances language feature (call stack, garbage collection)
 * No vm high-performance feature (tos, caching, super instr)

# Supported Platforms

Tests have been performed on the following platforms:

  * Linux with cmake 3.10 
  * compilers: gcc 7.3.0 & clang-7

# Install

  * Clone project
~~~
    > git clone https://github.com/kenavolic/mvm.git
~~~

  * Generate build system
~~~
    > mkdir mvm_build
    > cd mvm_build
    > cmake -DCMAKE_INSTALL_PREFIX=$path_to_mvm_install_dir -DMVM_BUILD_EXAMPLES=[ON|OFF] -DMVM_BUILD_TESTS=[ON|OFF] ../mvm
~~~

  * Compilation
~~~
    > make
    > make install
~~~

# Usage

## Import mvm to your project

  * In your CMakeLists.txt, import mvm
~~~
    find_package(mvm REQUIRED)
    ...
    target_link_libraries(my_proj mvm::mvm)
~~~

  * Configure your project to find pipet package
~~~
    > cmake -DCMAKE_PREFIX_PATH=$path_to_mvm_install_dir/cmake $path_to_your_proj_source_dir
~~~

## Implement an interpreter

TODO: see example for further documentation
