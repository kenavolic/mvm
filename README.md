# Mvm

[![Build Status](https://travis-ci.org/kenavolic/mvm.svg?branch=master)](https://travis-ci.org/kenavolic/mvm)

Mvm (meta virtual machine) is a toy c++ 17 headers-only library to generate simple stack-based virtual machine from static
description. The descriptive model mimics boost msm one with a clear separation between front-end
and back-end.

# Current State

As it has no real purpose, the project is not under active development.

If you find any use to it in real world or if it could be useful with some updates, give me a shout 
and I would be pleased to work on this project when I've got time.

Feel free to browse the TODO list to view a possible list of improvements.

# Features

  * Assembler/disassembler generation
  * Interpreter generation
  * Generated bytecode handled types: signed integer (2'complement), unsigned integer, floating point number (IEEE754)

# Limitations

 * Instruction set of 256 instructions max
 * No advances language feature (call stack, garbage collection)
 * No vm high-performance feature (tos, caching, super instr)

# Supported Platforms

Tests have been performed on the following platforms:

  * Linux with cmake 3.10 
  * compilers: gcc 7.3.0 & clang-7

# Install

  * Clone project
~~~
    > git clone https://github.com/kenavolic/mvm.git
~~~

  * Generate build system
~~~
    > mkdir mvm_build
    > cd mvm_build
    > cmake -DCMAKE_INSTALL_PREFIX=$path_to_mvm_install_dir -DMVM_BUILD_EXAMPLES=[ON|OFF] -DMVM_BUILD_TESTS=[ON|OFF] -DMVM_BUILD_WITH_TRACES=[ON|OFF] -DMVM_BUILD_WITH_FAST_INSTR=[ON|OFF] ../mvm
~~~

  * Compilation
~~~
    > make
    > make install
~~~

# Usage

## Import mvm to your project

  * In your CMakeLists.txt, import mvm
~~~
    find_package(Mvm REQUIRED)
    ...
    target_link_libraries(my_proj mvm::mvm)
~~~

  * Configure your project to find pipet package
~~~
    > cmake -DCMAKE_PREFIX_PATH=$path_to_mvm_install_dir/cmake $path_to_your_proj_source_dir
~~~

## Define a new instruction set

* The mini example shows a typical usage of this toy project with an assembly script
~~~
    ./mini square_sum.mas
~~~

* The exta example just shows how you can extend current concept
and instances in your instruction set definition
